openapi: 3.0.1
info:
  title: Closest Holiday Service API
  description: API to find closest Holiday
  version: 0.0.1
servers:
  - url: https://localhost:50000
    description: The server
tags:
  - name: holiday
paths:

  /holiday:
    get:
      tags:
        - holiday
      description: 'Return closest holiday'
      summary: 'Returns the closest holiday for the provided date'
      operationId: getClosestHoliday
      parameters:
        - name: requestId
          description: Session Id or Request Id
          required: false
          in: header
          schema:
            type: string
          example: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
        - name: x-api-key
          description: API key for authentication
          required: true
          in: header
          schema:
            type: string
          example: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
        - name: country
          description: 'For countries, ISO 3166-1 alpha-2 or ISO 3166-1 alpha-3 format. For subdivisions, ISO 3166-2 format. Accepts up to 10 comma separated values.'
          required: true
          in: query
          schema:
            type: string
          example: US
        - name: date
          description: 'Input date near which a holiday has to be searched'
          required: false
          in: query
          schema:
            type: string
            format: date
            example: '2015-07-04'
      responses:
        '200':
          description: 'Success! Everything is A-OK.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Holiday'

        '400':
          description: invalid input, object invalid
          content:
            application/Json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Error Response:
                  description: Error Response
                  value:
                    type: Validation
                    title: Validation Error
                    status: 4000
                    detail: Key Parameter missing
                    instance: Filter Instance
                    errors: [
                      {
                        code: 4000,
                        message: Key Parameter missing
                      }
                    ]

components:

  schemas:
    Holiday:
      type: object
      properties:
        nearestHolidayDate:
          type: string
          format: date
          example: '2021-12-25'
        holidayName:
          type: string
          example: 'Christmas Day'

    ErrorResponse:
      type: object
      required:
        - status
      properties:
        type:
          type: string
          example: Validation
          description: Provides the type of error
        title:
          type: string
          example: Internal Error
          description: Title of the Error
        status:
          type: integer
          example: 4000
          description: Internal status code
        detail:
          type: string
          example: Internal Server Error
          description: Provides the detail of the error message for the request validation exception
        instance:
          type: string
          example: Filter Instance
          description: At which instance the Error occurred
        errors:
          type: array
          items:
            $ref: '#/components/schemas/SubError'

    SubError:
      type: object
      properties:
        code:
          type: integer
          example: 4000
        message:
          type: string
          example: API key is missing
          description: provides the detail of the error message for checked exception and 500 exception